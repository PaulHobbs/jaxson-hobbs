var u=Object.defineProperty;var g=(r,s,e)=>s in r?u(r,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[s]=e;var t=(r,s,e)=>g(r,typeof s!="symbol"?s+"":s,e);import{_ as f}from"../chunks/Dp1pzeXC.js";import{t as m,a as y}from"../chunks/CSRmnx4H.js";import"../chunks/D0KQRh0K.js";import{p as x,i as b}from"../chunks/Ph2PeMm_.js";import{i as _}from"../chunks/CMsLG6-y.js";import{o as S,a as k}from"../chunks/D9P8U_Fn.js";var w=m('<div id="phaser-game-container"></div>');function D(r,s){x(s,!1);let e;S(async()=>{const o=await f(()=>import("../chunks/CGRnhIda.js").then(h=>h.p),[],import.meta.url);class c extends o.Scene{constructor(){super(...arguments);t(this,"player");t(this,"cursors");t(this,"platforms");t(this,"rings");t(this,"hazards");t(this,"score");t(this,"scoreText");t(this,"backgroundFar");t(this,"backgroundMid");t(this,"music")}preload(){this.textures.generate("player",{data:["1"],pixelWidth:32}),this.textures.generate("ground",{data:["#".repeat(64)],pixelWidth:64}),this.textures.generate("ring",{data:["E"],pixelWidth:16,palette:{E:"#ffff00"}}),this.textures.generate("hazard",{data:["2"],pixelWidth:32,palette:{2:"#ff0000"}}),this.textures.generate("background-far",{data:["+"],pixelWidth:1,palette:{"+":"#334455"}}),this.textures.generate("background-mid",{data:["."],pixelWidth:1,palette:{".":"#556677"}}),this.load.audio("bgm","assets/audio/music.ogg"),this.load.audio("sfx_jump","assets/audio/jump.ogg"),this.load.audio("sfx_ring","assets/audio/ring.ogg"),this.load.audio("sfx_hit","assets/audio/hit.ogg")}create(){const i=this.sys.game.config.width,a=this.sys.game.config.height;this.backgroundFar=this.add.tileSprite(0,0,i,a,"background-far").setOrigin(0,0).setScrollFactor(.25),this.backgroundMid=this.add.tileSprite(0,0,i,a,"background-mid").setOrigin(0,0).setScrollFactor(.5);const l=i/2,p=a/2;this.player=this.physics.add.sprite(l,p,"player"),this.player.setCollideWorldBounds(!0),this.platforms=this.physics.add.staticGroup(),this.platforms.create(400,568,"ground").setScale(2).refreshBody(),this.platforms.create(600,400,"ground"),this.platforms.create(50,250,"ground"),this.platforms.create(750,220,"ground"),this.physics.add.collider(this.player,this.platforms),this.hazards=this.physics.add.staticGroup(),this.hazards.create(300,536,"hazard"),this.hazards.create(700,368,"hazard"),this.physics.add.collider(this.player,this.hazards,this.hitHazard,void 0,this),this.rings=this.physics.add.group({allowGravity:!1}),this.rings.create(100,500,"ring"),this.rings.create(150,500,"ring"),this.rings.create(600,350,"ring"),this.physics.world.setBounds(0,0,1600,600),this.cameras.main.setBounds(0,0,1600,600),this.cameras.main.startFollow(this.player),this.score=0,this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",color:"#FFF"}),this.scoreText.setScrollFactor(0),this.physics.add.overlap(this.player,this.rings,this.collectRing,void 0,this),this.cursors=this.input.keyboard.createCursorKeys(),this.sound.get("bgm")&&(this.music=this.sound.add("bgm",{loop:!0,volume:.5}),this.music.play())}collectRing(i,a){i instanceof o.Physics.Arcade.Sprite&&a instanceof o.Physics.Arcade.Sprite&&(a.disableBody(!0,!0),this.score+=10,this.scoreText.setText("Score: "+this.score),this.sound.get("sfx_ring")&&this.sound.play("sfx_ring"))}hitHazard(i,a){i instanceof o.Physics.Arcade.Sprite&&a instanceof o.Physics.Arcade.Sprite&&(i.setTint(16711680),this.time.delayedCall(100,()=>{i.clearTint()}),this.sound.get("sfx_hit")&&this.sound.play("sfx_hit"))}update(){this.cursors.left.isDown?this.player.setVelocityX(-160):this.cursors.right.isDown?this.player.setVelocityX(160):this.player.setVelocityX(0),this.player.body&&(this.cursors.space.isDown||this.cursors.up.isDown)&&this.player.body.touching.down&&(this.player.setVelocityY(-330),this.sound.get("sfx_jump")&&this.sound.play("sfx_jump")),this.backgroundFar.tilePositionX=this.cameras.main.scrollX*.25,this.backgroundMid.tilePositionX=this.cameras.main.scrollX*.5}}const n={type:o.AUTO,width:800,height:600,parent:"phaser-game-container",backgroundColor:"#2d2d2d",scene:c,physics:{default:"arcade",arcade:{gravity:{x:0,y:300},debug:!1}}};e=new o.Game(n)}),k(()=>{e&&e.destroy(!0)}),_();var d=w();y(r,d),b()}export{D as component};
